# internal project uses simpler one-branch scheme: internal branch only. No dev to master etc, as that is handled in the public version.
# dev and master come from the public version and should be touched only when the public changes are merged in

schemaVersion: '2.0'
timeout: 30
machine:
  java:
    version: 1.8
# Publishing to repository without include/exclude setting, 
# otherwise org artifacts are filtered out.
publish:
  libraries:
    repo: m2:oss-patched

builds:
# apple-prb
  - branchName: apple
    build:
      template: buildozer:v1:prb

# apple-release
  - branchName: apple
    build:
      template: buildozer:v1:publish
    trigger:
      gitPush: false
      
# release-prb
  - branchName: release
    build:
      template: gradle:v3:lib:prb
    machine:
      java:
        version: 1.8

# build master to a release, when needed
  - branchName: release
    build:
      template: buildozer:v1:publish
    trigger:
      gitPush: false
